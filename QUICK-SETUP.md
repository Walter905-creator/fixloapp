#!/bin/bash

echo "üîß Fixlo - Quick Setup Guide"
echo "========================================"
echo ""
echo "‚ùå You're getting 500 errors because environment variables are missing."
echo "üìã Follow these steps to fix your deployment:"
echo ""

echo "1Ô∏è‚É£ CHECK CURRENT STATUS:"
echo "   Visit: https://handyman-connect-1-1.onrender.com/api/env-check"
echo "   This will show which environment variables are missing"
echo ""

echo "2Ô∏è‚É£ GO TO RENDER DASHBOARD:"
echo "   ‚Ä¢ Open https://dashboard.render.com"
echo "   ‚Ä¢ Find your 'handyman-connect-1-1' service"
echo "   ‚Ä¢ Click 'Environment' tab"
echo ""

echo "3Ô∏è‚É£ ADD REQUIRED ENVIRONMENT VARIABLES:"
echo ""
echo "   üóÑÔ∏è DATABASE (Required):"
echo "   MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/handyman-connect"
echo ""
echo "   üîê SECURITY (Required):"
echo "   JWT_SECRET=your-super-secure-32-character-secret-key"
echo "   ADMIN_EMAIL=admin@handyman-connect.com"
echo "   ADMIN_PASSWORD=your-secure-admin-password"
echo ""
echo "   üåê CLIENT (Required):"
echo "   CLIENT_URL=https://www.handyman-connect.com"
echo "   NODE_ENV=production"
echo ""
echo "   ü§ñ AI ASSISTANT (Optional):"
echo "   OPENAI_API_KEY=sk-your-openai-api-key"
echo ""

echo "4Ô∏è‚É£ GET MONGODB CONNECTION STRING:"
echo "   ‚Ä¢ Go to https://mongodb.com/atlas"
echo "   ‚Ä¢ Create free cluster (if you don't have one)"
echo "   ‚Ä¢ Click 'Connect' ‚Üí 'Connect your application'"
echo "   ‚Ä¢ Copy the connection string"
echo "   ‚Ä¢ Replace <username>, <password>, and <dbname>"
echo ""

echo "5Ô∏è‚É£ GET OPENAI API KEY (for AI features):"
echo "   ‚Ä¢ Go to https://platform.openai.com/api-keys"
echo "   ‚Ä¢ Create new secret key"
echo "   ‚Ä¢ Copy the key (starts with sk-)"
echo ""

echo "6Ô∏è‚É£ AFTER ADDING VARIABLES:"
echo "   ‚Ä¢ Click 'Save Changes' in Render"
echo "   ‚Ä¢ Wait for automatic redeploy (2-3 minutes)"
echo "   ‚Ä¢ Test: https://handyman-connect-1-1.onrender.com/api/health"
echo ""

echo "‚úÖ SUCCESS INDICATORS:"
echo "   ‚Ä¢ /api/env-check shows all variables as 'set ‚úÖ'"
echo "   ‚Ä¢ /api/health shows database as 'connected'"
echo "   ‚Ä¢ Admin dashboard loads without errors"
echo "   ‚Ä¢ AI assistant works (if OpenAI key added)"
echo ""

echo "üÜò STILL HAVING ISSUES?"
echo "   ‚Ä¢ Check Render service logs for detailed errors"
echo "   ‚Ä¢ Verify MongoDB Atlas allows connections from 0.0.0.0/0"
echo "   ‚Ä¢ Ensure all environment variable names are spelled exactly right"
echo "   ‚Ä¢ Test one endpoint at a time to isolate the issue"
