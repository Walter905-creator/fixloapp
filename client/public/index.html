<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fixlo</title>
    <!-- Optional: very brief anti-FOUC guard -->
    <style id="fixlo-preload-style">
      html, body { min-height:100%; }
      /* keep it *scoped* to #root only */
      #root { opacity: 0; transition: opacity .15s ease-in; }
    </style>
    <style id="force-visible">
      html, body, #root { opacity: 1 !important; visibility: visible !important; }
      #preload, .preload, .screen-hidden, [data-preload], .preload-guard { display: none !important; }
    </style>
    <!-- FORCE‑UNHIDE ON FIRST PAINT (safe: no app logic touched) -->
    <script>
      (function () {
        var html = document.documentElement;
        var body = document.body;
        var root = document.getElementById('root');

        // Remove typical "loading/hidden" classes or attributes
        ['loading','app-loading','app-hidden','preload','invisible','is-hidden']
          .forEach(function (c) { html.classList.remove(c); body.classList.remove(c); });

        html.removeAttribute('data-loading');
        body.removeAttribute('data-loading');
        body.removeAttribute('hidden');
        if (root) { root.removeAttribute('hidden'); root.style.display = 'block'; }

        // Hard unhide — protects against stuck CSS
        html.style.opacity = '1';
        body.style.opacity = '1';
        html.style.visibility = 'visible';
        body.style.visibility = 'visible';

        // Kill any transition that might keep it transparent
        html.style.transition = 'none';
        body.style.transition = 'none';

        // Force unhide immediately
        document.documentElement.style.opacity = '1';
        document.documentElement.style.visibility = 'visible';
        const fixloRoot = document.getElementById('root');
        if (fixloRoot) { 
          fixloRoot.style.opacity = '1'; 
          fixloRoot.style.visibility = 'visible';
          fixloRoot.style.display = 'block';
        }
        
        // Remove common hiding classes
        ['loading','app-loading','app-hidden','preload','invisible','is-hidden']
          .forEach(function(className) {
            document.documentElement.classList.remove(className);
            document.body.classList.remove(className);
          });

        // Safety: if something re‑hides it later, unhide again shortly after
        setTimeout(function () {
          html.style.opacity = '1';
          body.style.opacity = '1';
          html.style.visibility = 'visible';
          body.style.visibility = 'visible';
          if (root && getComputedStyle(root).display === 'none') root.style.display = 'block';
        }, 250);
      })();
    </script>
    <script>
      // Safe reveal function used by the app and as fallback here
      (function(){
        window.__fixloReveal = function(){
          try {
            var root = document.getElementById('root');
            if (root) root.style.opacity = '1';
            var s = document.getElementById('fixlo-preload-style');
            if (s) s.parentNode.removeChild(s);
            document.documentElement.style.visibility = 'visible';
            document.body.style.visibility = 'visible';
          } catch(e){ /* no-op */ }
        };
        // Worst-case: reveal after 300ms even if React never calls it
        setTimeout(window.__fixloReveal, 300);
      })();
    </script>
  </head>
  <body>
    <noscript>Fixlo needs JavaScript enabled.</noscript>
    <div id="boot-ok" style="padding:12px;background:#fff;color:#111;font:14px/1.4 system-ui;border-bottom:1px solid #eee">
      Fixlo LIVE build OK — if you see this but no UI below, CSS is hiding the app.
    </div>
    
    <div id="root"></div>

    <script>
      // Force unhide immediately
      document.documentElement.style.opacity = '1';
      document.documentElement.style.visibility = 'visible';
      const bodyRoot = document.getElementById('root');
      if (bodyRoot) { 
        bodyRoot.style.opacity = '1'; 
        bodyRoot.style.visibility = 'visible';
        bodyRoot.style.display = 'block';
      }
      
      // Remove common hiding classes
      ['loading','app-loading','app-hidden','preload','invisible','is-hidden']
        .forEach(function(className) {
          document.documentElement.classList.remove(className);
          document.body.classList.remove(className);
        });
    </script>
  </body>
</html>
